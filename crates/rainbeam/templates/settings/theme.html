{% extends "base.html" %} {% block sidenav %}
<a href="/settings?profile={{ user.id }}"
    >{{ icon "smile" }}{{ text "settings:link.account" }}</a
>
<a href="/settings/sessions?profile={{ user.id }}"
    >{{ icon "cookie" }}{{ text "settings:link.sessions" }}</a
>
<a href="/settings/profile?profile={{ user.id }}"
    >{{ icon "user-round-pen" }}{{ text "settings:link.profile" }}</a
>
<a class="active" href="/settings/theme?profile={{ user.id }}"
    >{{ icon "palette" }}{{ text "settings:link.theme" }}</a
>
<a href="/settings/privacy?profile={{ user.id }}"
    >{{ icon "lock" }}{{ text "settings:link.privacy" }}</a
>
<a href="/settings/coins?profile={{ user.id }}"
    >{{ icon "store" }}{{ text "settings:link.coins" }}</a
>
{% endblock %} {% block panel %}
<h4 class="title">Theming</h4>
<div class="flex flex-col gap-4" data-tab="settings">
    <div class="flex gap-2">
        <a href="/market/new?type=UserTheme" class="button primary sm:w-full">
            {{ icon "badge-plus" }} {{ text
            "settings:coins.html:text.save_theme" }}
        </a>

        <a
            href="/market?creator={{ user.id }}&type=UserTheme"
            class="button sm:w-full"
        >
            {{ icon "paint-bucket" }} {{ text
            "settings:coins.html:text.my_themes" }}
        </a>
    </div>

    <div class="flex flex-col gap-1">
        <label for="sparkler:profile_theme">Profile theme</label>

        <select
            type="url"
            name="sparkler:profile_theme"
            id="sparkler:profile_theme"
            onchange="update_kv('sparkler:profile_theme', event.target.options[event.target.selectedIndex].value)"
        >
            <option value="">User-choice</option>
            <option value="light" id="light">
                {{ text "settings:text.light" }}
            </option>
            <option value="dark" id="dark">Dark</option>
            <option value="dark dim" id="dark dim">
                {{ text "settings:text.dim" }}
            </option>
        </select>

        <p class="fade">This is the base theme used on your profile.</p>
    </div>

    <h4 class="title">Colors</h4>
    <div
        class="markdown-alert-important flex flex-col gap-2"
        style="align-items: flex-start"
    >
        <b>Theming best practices:</b>

        <ol>
            <li>Make sure your theme is easily readable and accessible</li>
            <li>Make sure your theme follows a coherent color scheme</li>
            <li>
                Make sure your theme isn't too bright or too dark, as many users
                could be sensitive to extreme colors
            </li>
        </ol>
    </div>

    <h5 class="title">General</h5>
    <div class="flex flex-collapse gap-2 card secondary">
        <div class="flex flex-col gap-1 w-full">
            <label for="sparkler:color_surface">Surface</label>

            <div class="flex gap-2 flex-row">
                <input
                    type="color"
                    onchange="link_color('sparkler:color_surface', event.target.value)"
                />

                <input
                    name="sparkler:color_surface"
                    id="sparkler:color_surface"
                    onchange="update_kv('sparkler:color_surface', event.target.value)"
                    class="w-full"
                />
            </div>

            <p class="fade">Page background.</p>
        </div>

        <div class="flex flex-col gap-1 w-full">
            <label for="sparkler:color_text">Text</label>

            <div class="flex gap-2 flex-row">
                <input
                    type="color"
                    onchange="link_color('sparkler:color_text', event.target.value)"
                />

                <input
                    name="sparkler:color_text"
                    id="sparkler:color_text"
                    onchange="update_kv('sparkler:color_text', event.target.value)"
                    class="w-full"
                />
            </div>

            <p class="fade">Text color used everywhere.</p>
        </div>
    </div>

    <h5 class="title">Lowered</h5>
    <div class="flex flex-col gap-2">
        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_lowered">Lowered</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_lowered', event.target.value)"
                    />

                    <input
                        name="sparkler:color_lowered"
                        id="sparkler:color_lowered"
                        onchange="update_kv('sparkler:color_lowered', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Stuff that is darker than the page background. (questions,
                    motivational header, secondary buttons, etc.)
                </p>
            </div>

            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_text_lowered">Text lowered</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_text_lowered', event.target.value)"
                    />

                    <input
                        name="sparkler:color_text_lowered"
                        id="sparkler:color_text_lowered"
                        onchange="update_kv('sparkler:color_text_lowered', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Text color used on lowered elements (motivation header,
                    questions, etc.) everywhere.
                </p>
            </div>
        </div>

        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_super_lowered">Super lowered</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_super_lowered', event.target.value)"
                    />

                    <input
                        name="sparkler:color_super_lowered"
                        id="sparkler:color_super_lowered"
                        onchange="update_kv('sparkler:color_super_lowered', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">Even darker than that. (button hover, etc.)</p>
            </div>
        </div>
    </div>

    <h5 class="title">Raised</h5>
    <div class="flex flex-col gap-2">
        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_raised">Raised</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_raised', event.target.value)"
                    />

                    <input
                        name="sparkler:color_raised"
                        id="sparkler:color_raised"
                        onchange="update_kv('sparkler:color_raised', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Stuff that is lighter than the page background. (profile
                    card, pill menu button hover, responses, etc.)
                </p>
            </div>

            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_text_raised">Text raised</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_text_raised', event.target.value)"
                    />

                    <input
                        name="sparkler:color_text_raised"
                        id="sparkler:color_text_raised"
                        onchange="update_kv('sparkler:color_text_raised', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Text color used on raised elements (profile card, responses,
                    etc.) everywhere.
                </p>
            </div>
        </div>

        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_super_raised">Super raised</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_super_raised', event.target.value)"
                    />

                    <input
                        name="sparkler:color_super_raised"
                        id="sparkler:color_super_raised"
                        onchange="update_kv('sparkler:color_super_raised', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Even lighter than that. (pill menu buttons, etc.)
                </p>
            </div>
        </div>
    </div>

    <h5 class="title">Primary</h5>
    <div class="flex flex-col gap-2">
        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_primary">Primary</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_primary', event.target.value)"
                    />

                    <input
                        name="sparkler:color_primary"
                        id="sparkler:color_primary"
                        onchange="update_kv('sparkler:color_primary', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">That primary pink-ish color.</p>
            </div>

            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_text_primary">Text primary</label>

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_text_primary', event.target.value)"
                    />

                    <input
                        name="sparkler:color_text_primary"
                        id="sparkler:color_text_primary"
                        onchange="update_kv('sparkler:color_text_primary', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    Text color used on elements using the primary color as a
                    background.
                </p>
            </div>
        </div>

        <div class="flex flex-collapse gap-2 card secondary">
            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_primary_lowered"
                    >Primary lowered</label
                >

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_primary_lowered', event.target.value)"
                    />

                    <input
                        name="sparkler:color_primary_lowered"
                        id="sparkler:color_primary_lowered"
                        onchange="update_kv('sparkler:color_primary_lowered', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    That primary pink-ish color when you hover over it
                    (buttons).
                </p>
            </div>

            <div class="flex flex-col gap-1 w-full">
                <label for="sparkler:color_primary_raised"
                    >Primary raised</label
                >

                <div class="flex gap-2 flex-row">
                    <input
                        type="color"
                        onchange="link_color('sparkler:color_primary_raised', event.target.value)"
                    />

                    <input
                        name="sparkler:color_primary_raised"
                        id="sparkler:color_primary_raised"
                        onchange="update_kv('sparkler:color_primary_raised', event.target.value)"
                        class="w-full"
                    />
                </div>

                <p class="fade">
                    A lightly lighter version of your primary color.
                </p>
            </div>
        </div>
    </div>

    <h5 class="title">Extras</h5>
    <div class="flex flex-collapse gap-2 card secondary">
        <div class="flex flex-col gap-1 w-full">
            <label for="sparkler:color_link">Link color</label>

            <div class="flex gap-2 flex-row">
                <input
                    type="color"
                    onchange="link_color('sparkler:color_link', event.target.value)"
                />

                <input
                    name="sparkler:color_link"
                    id="sparkler:color_link"
                    onchange="update_kv('sparkler:color_link', event.target.value)"
                    class="w-full"
                />
            </div>

            <p class="fade">Text color used on links.</p>
        </div>

        <div class="flex flex-col gap-1 w-full">
            <label for="sparkler:color_shadow">Shadow</label>

            <div class="flex gap-2 flex-row">
                <input
                    type="color"
                    onchange="link_color('sparkler:color_shadow', event.target.value)"
                />

                <input
                    name="sparkler:color_shadow"
                    id="sparkler:color_shadow"
                    onchange="update_kv('sparkler:color_shadow', event.target.value)"
                    class="w-full"
                />
            </div>

            <p class="fade">Color used for shadows.</p>
        </div>
    </div>

    <h4 class="title">Advanced</h4>
    <div class="flex flex-col gap-1">
        <label for="sparkler:custom_css">Custom CSS</label>

        <textarea
            name="sparkler:custom_css"
            id="sparkler:custom_css"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="off"
            class="hidden"
        ></textarea>

        <a href="#/css" class="button">
            {{ icon "pen" }}
            <span>{{ text "general:action.edit" }}</span>
        </a>

        <p class="fade">
            Custom profile CSS that accepts more than just colors.
        </p>
    </div>

    <div class="flex flex-col gap-1">
        <label for="rainbeam:market_theme_template">Theme base</label>

        <button onclick="update_kv('rainbeam:market_theme_template', '')">
            {{ text "general:action.clear" }}
        </button>

        <p class="fade">
            Pressing "Clear" will reset the theme base applied from market
            themes.
        </p>
    </div>
</div>

<div class="hidden flex flex-col gap-2" data-tab="css">
    <script src="https://unpkg.com/codemirror@5.39.2/lib/codemirror.js"></script>
    <script src="https://unpkg.com/codemirror@5.39.2/addon/display/placeholder.js"></script>
    <script src="https://unpkg.com/codemirror@5.39.2/mode/css/css.js"></script>

    <link
        rel="stylesheet"
        href="https://unpkg.com/codemirror@5.39.2/lib/codemirror.css"
    />

    <div class="flex w-full gap-2 justify-between">
        <b>Custom CSS</b>

        <div class="flex gap-2">
            <button
                class="primary bold"
                onclick="update_kv('sparkler:custom_css', globalThis.css_editor_.getValue())"
            >
                {{ icon "check" }}
                <span>{{ text "general:action.save" }}</span>
            </button>

            <a class="button red bold" href="#/settings">
                {{ icon "x" }}
                <span>{{ text "general:action.close" }}</span>
            </a>
        </div>
    </div>

    <div id="css_editor" class="css_editor card secondary"></div>

    <script>
        setTimeout(() => {
            use("codemirror", (codemirror) => {
                codemirror.create_editor(
                    document.getElementById("css_editor"),
                    document.getElementById("sparkler:custom_css").value,
                    "/* enter custom CSS */",
                    "css_editor_",
                    "css",
                );
            });

            for (const input of document.querySelectorAll(
                "input[type=color]",
            )) {
                input.value = document.getElementById(
                    input
                        .getAttribute("onchange")
                        .split("link_color('")[1]
                        .split("'")[0],
                ).value;
            }
        }, 500);
    </script>

    <style>
        .CodeMirror {
            height: max-content !important;
        }

        .CodeMirror-line {
            font-family: ui-monospace, monospace !important;
        }
    </style>
</div>
{% call super() %} {% endblock %}
