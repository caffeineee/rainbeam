<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="https://github.com/swmff/neospring/blob/master/docs/nss.md">
    {% if let Some(display_name) = other.metadata.kv.get("sparkler:display_name") %}
    <title>{{ display_name }}</title>
    {% else %}
    <title>{{ other.username }}</title>
    {% endif %}

    <subtitle>{{ other.username }}</subtitle>
    
    <icon>{{ config.host }}/@{{ other.username }}/avatar</icon>
    <banner>{{ config.host }}/@{{ other.username }}/banner</banner>

    <link rel="alternate" type="text/html" hreflang="en" href="{{ config.host }}/@{{ other.username }}" />

    {% if let Some(biography) = other.metadata.kv.get("sparkler:biography") %}
    <description type="html">{{ biography }}</description>
    {% else %}
    <description type="html">@{{ other.username }}'s feed</description>
    {% endif %}

    <subfeed name="responses">
    {% for response in responses %}
        <entry type="response">
            <question>
                <id>{{ response.0.id }}</id>
                <author id="{{ response.0.author.id }}">{{ response.0.author.username }}</author>
                <content>{{ response.0.content }}</content>
                <timestamp>{{ response.0.timestamp }}</timestamp>
            </question>

            <response>
                <id>{{ response.1.id }}</id>
                <author id="{{ response.1.author.id }}">{{ response.1.author.username }}</author>
                <content>{{ response.1.content }}</content>
                <timestamp>{{ response.1.timestamp }}</timestamp>
                <comments>{{ response.2 }}</comments>
                <reactions>{{ response.3 }}</reactions>
            </response>
            
            <link rel="alternate" type="text/html" href="{{ config.host }}/response/{{ response.1.id }}" />
            <link rel="comments" type="text/html" href="{{ config.host }}/response/{{ response.1.id }}" />
        </entry>
    {% endfor %}
    </subfeed>
</feed>
